<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhopal Urban Planning - NASA Data Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        :root {
            --primary: #50589C;
            --secondary: #7A6FBE;
            --accent: #FF6B6B;
            --dark: #2D3748;
            --light: #F7FAFC;
            --success: #48BB78;
            --warning: #ED8936;
            --danger: #F56565;
            --info: #4299E1;
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 120px 0 80px;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card {
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 15px;
            overflow: hidden;
            background: white;
            height: 100%;
            border-top: 4px solid var(--primary);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(80, 88, 156, 0.3);
        }
        
        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 1.8rem;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(80, 88, 156, 0.3);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .nav-custom {
            background: linear-gradient(135deg, var(--dark), var(--primary)) !important;
        }
        
        .btn-primary-custom {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(80, 88, 156, 0.4);
            color: white;
        }
        
        .btn-secondary-custom {
            background: transparent;
            color: white;
            border: 2px solid white;
            border-radius: 25px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-secondary-custom:hover {
            background: white;
            color: var(--primary);
            transform: translateY(-2px);
        }
        
        .section-title {
            color: var(--dark);
            font-weight: 700;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--accent);
        }
        
        #homeMap {
            height: 400px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: 3px solid white;
        }
        
        .area-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .area-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
        }
        
        .area-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(80, 88, 156, 0.2);
        }
        
        .card-custom {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .card-header-custom {
            background: linear-gradient(135deg, var(--primary), var(--secondary)) !important;
            color: white;
            border-radius: 15px 15px 0 0 !important;
            border: none;
            padding: 1.5rem;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .hero-badge {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 8px 16px;
            margin: 0 5px 10px 0;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark nav-custom fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{{ url_for('index') }}">
                <i class="fas fa-city me-2"></i>
                Bhopal Urban Planning
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('index') }}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('satellite') }}">Satellite Data</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('satellite_3d') }}">3D Maps</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('heatmaps') }}">Heat Maps</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('analysis_page') }}">Analysis</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">
                        Bhopal Urban
                        <span style="color: #FF6B6B;">Planning</span>
                    </h1>
                    <p class="lead mb-4">
                        Advanced urban planning insights powered by NASA satellite data, MODIS, and Landsat imagery. 
                        Comprehensive analysis of transport, pollution, and energy resources across Bhopal.
                    </p>
                    <div class="mb-4">
                        <span class="hero-badge"><i class="fas fa-satellite me-2"></i>NASA Data</span>
                        <span class="hero-badge"><i class="fas fa-map me-2"></i>3D Mapping</span>
                        <span class="hero-badge"><i class="fas fa-chart-line me-2"></i>Real-time Analytics</span>
                    </div>
                    <div class="d-flex gap-3 flex-wrap">
                        <a href="{{ url_for('dashboard') }}" class="btn btn-primary-custom">
                            <i class="fas fa-chart-bar me-2"></i>Explore Dashboard
                        </a>
                        <a href="{{ url_for('satellite_3d') }}" class="btn btn-secondary-custom">
                            <i class="fas fa-globe me-2"></i>View 3D Maps
                        </a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div id="homeMap" class="mt-4 mt-lg-0"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-number">{{ data|length }}</div>
                        <h5>Urban Areas</h5>
                        <p class="mb-0">Comprehensive Coverage</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-number">5+</div>
                        <h5>NASA APIs</h5>
                        <p class="mb-0">Data Sources</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-number">100+</div>
                        <h5>Data Points</h5>
                        <p class="mb-0">Real-time Metrics</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-number">24/7</div>
                        <h5>Monitoring</h5>
                        <p class="mb-0">Continuous Analysis</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-5">
        <div class="container">
            <h2 class="section-title text-center">Advanced Urban Planning Features</h2>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4 h-100">
                        <div class="feature-icon">
                            <i class="fas fa-globe-americas"></i>
                        </div>
                        <h4 class="fw-bold mb-3">3D Satellite Mapping</h4>
                        <p class="text-muted">
                            Interactive 3D maps powered by Cesium JS with real-time satellite imagery and terrain data.
                        </p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4 h-100">
                        <div class="feature-icon">
                            <i class="fas fa-satellite"></i>
                        </div>
                        <h4 class="fw-bold mb-3">NASA Data Integration</h4>
                        <p class="text-muted">
                            Real-time data from MODIS, Landsat, and other NASA APIs for comprehensive urban analysis.
                        </p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4 h-100">
                        <div class="feature-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <h4 class="fw-bold mb-3">Heat Map Analytics</h4>
                        <p class="text-muted">
                            Interactive heat maps showing sustainability scores, pollution levels, and urban development patterns.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Areas Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <h2 class="section-title text-center">Bhopal Urban Areas Analysis</h2>
            <div class="area-grid">
                {% for area_key, area_data in data.items() %}
                <div class="area-card">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="fw-bold mb-0">{{ area_data.name }}</h5>
                        <span class="badge 
                            {% if area_data.sustainability_score >= 50 %}bg-success
                            {% elif area_data.sustainability_score >= 30 %}bg-warning
                            {% else %}bg-danger{% endif %}">
                            {{ "%.1f"|format(area_data.sustainability_score) }}
                        </span>
                    </div>
                    <p class="text-muted mb-3">{{ area_data.type }}</p>
                    <div class="row text-center">
                        <div class="col-4">
                            <small class="text-muted d-block">Transport</small>
                            <strong style="color: var(--primary);">{{ "%.1f"|format(area_data.transport_index) }}</strong>
                        </div>
                        <div class="col-4">
                            <small class="text-muted d-block">Pollution</small>
                            <strong style="color: var(--danger);">{{ "%.1f"|format(area_data.pollution_index) }}</strong>
                        </div>
                        <div class="col-4">
                            <small class="text-muted d-block">Energy</small>
                            <strong style="color: var(--success);">{{ "%.1f"|format(area_data.energy_index) }}</strong>
                        </div>
                    </div>
                    <a href="{{ url_for('area_analysis', area_key=area_key) }}" class="btn btn-primary-custom btn-sm w-100 mt-3">
                        View Detailed Analysis
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Sustainability Chart Section -->
    {% if sustainability_chart %}
    <section class="py-5">
        <div class="container">
            <h2 class="section-title text-center">Area Sustainability Scores</h2>
            <div class="card card-custom">
                <div class="card-header card-header-custom">
                    <h4 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Sustainability Overview</h4>
                </div>
                <div class="card-body">
                    {{ sustainability_chart|safe }}
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- CTA Section -->
    <section class="py-5" style="background: linear-gradient(135deg, var(--dark), var(--primary)); color: white;">
        <div class="container text-center">
            <h2 class="mb-4">Ready to Explore Bhopal's Urban Analytics?</h2>
            <p class="lead mb-4">
                Dive deep into comprehensive urban planning analysis with NASA-powered data insights and 3D mapping.
            </p>
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{{ url_for('dashboard') }}" class="btn btn-light btn-lg">
                    <i class="fas fa-rocket me-2"></i>Launch Dashboard
                </a>
                <a href="{{ url_for('satellite_3d') }}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-globe me-2"></i>Explore 3D Maps
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h5 class="mb-3">
                        <i class="fas fa-city me-2"></i>
                        Bhopal Urban Planning
                    </h5>
                    <p class="text-muted mb-0">
                        Advanced urban planning analysis powered by NASA satellite data and 3D mapping.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-muted mb-0">
                        &copy; 2025 NASA Hackathon Project. Bhopal Urban Planning Analytics.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Initialize map on homepage
        var homeMap = L.map('homeMap').setView([23.2599, 77.4126], 11);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(homeMap);

        // Add markers for Bhopal areas
        var areas = [
            {name: "Old Bhopal Heritage", lat: 23.2599, lon: 77.4126, type: "Heritage & Commercial", score: 24.7, key: "old_bhopal"},
            {name: "New Bhopal Development", lat: 23.2278, lon: 77.4357, type: "Residential & Commercial", score: 33.8, key: "new_bhopal"},
            {name: "Shahpura Sector", lat: 23.3000, lon: 77.3667, type: "Mixed Use", score: 28.7, key: "shahpura"},
            {name: "Kolar Residential Zone", lat: 23.1667, lon: 77.4333, type: "Residential", score: 41.7, key: "kolar"},
            {name: "Indrapuri Housing", lat: 23.2800, lon: 77.4200, type: "Residential", score: 35.2, key: "indrapuri"},
            {name: "Bhopal Lake Area", lat: 23.2667, lon: 77.4000, type: "Environmental & Recreational", score: 55.8, key: "bhopal_lake"},
            {name: "Industrial Zone", lat: 23.2000, lon: 77.4500, type: "Industrial", score: 15.3, key: "industrial_area"}
        ];

        areas.forEach(function(area) {
            var color = area.score >= 50 ? '#48BB78' : area.score >= 30 ? '#ED8936' : '#F56565';
            
            L.marker([area.lat, area.lon])
                .addTo(homeMap)
                .bindPopup(`
                    <div style="min-width: 200px;">
                        <h5 style="color: #2D3748; margin-bottom: 10px; border-bottom: 2px solid #50589C; padding-bottom: 5px;">
                            ${area.name}
                        </h5>
                        <p><strong>Type:</strong> ${area.type}</p>
                        <p><strong>Score:</strong> <span style="color: ${color}; font-weight: bold;">${area.score}</span></p>
                        <a href="/analysis/${area.key}" class="btn btn-primary-custom btn-sm w-100">View Detailed Analysis</a>
                    </div>
                `)
                .bindTooltip(`${area.name} - Score: ${area.score}`);
        });
    </script>
</body>
</html>