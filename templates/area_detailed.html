<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ area_name }} - Detailed Analysis | NASA Hackathon</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #50589C;
            --primary-light: #6A72B0;
            --primary-dark: #404780;
            --secondary: #FF6B35;
            --accent: #4ECDC4;
            --dark: #2C3E50;
            --light: #F8F9FA;
            --success: #27AE60;
            --warning: #E67E22;
            --danger: #E74C3C;
            --info: #3498DB;
        }
        
        .area-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 80px 0 40px;
        }
        
        .analysis-card {
            background: white;
            border-radius: 15px;
            border: none;
            box-shadow: 0 8px 25px rgba(80, 88, 156, 0.15);
            margin-bottom: 25px;
        }
        
        .card-header-custom {
            background: linear-gradient(135deg, var(--primary), var(--primary-light)) !important;
            color: white;
            border-radius: 15px 15px 0 0 !important;
            border: none;
            padding: 1.5rem;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--light), white);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid var(--primary);
            height: 100%;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .metric-badge {
            background: var(--light);
            border-radius: 20px;
            padding: 8px 15px;
            margin: 5px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{{ url_for('index') }}" style="color: var(--primary);">
                <i class="fas fa-city me-2"></i>Bhopal Urban Planning
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="{{ url_for('index') }}">Home</a>
                <a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a>
                <a class="nav-link" href="{{ url_for('satellite_analysis_comprehensive') }}">Satellite Analysis</a>
                <a class="nav-link" href="{{ url_for('heatmaps') }}">Heat Maps</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <div class="area-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-5 fw-bold">{{ area_name }}</h1>
                    <p class="lead mb-3">{{ area_description }}</p>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-light text-dark">
                            <i class="fas fa-tag me-1"></i>{{ area_type }}
                        </span>
                        <span class="badge bg-success">
                            <i class="fas fa-chart-line me-1"></i>Score: {{ "%.1f"|format(area_data.sustainability_score) }}
                        </span>
                        <span class="badge bg-info">
                            <i class="fas fa-thermometer-half me-1"></i>{{ "%.1f"|format(area_data.temperature) }}°C
                        </span>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <div class="btn-group">
                        <a href="{{ url_for('satellite_3d') }}" class="btn btn-outline-light">
                            <i class="fas fa-globe me-1"></i>3D View
                        </a>
                        <a href="{{ url_for('download_csv') }}" class="btn btn-light">
                            <i class="fas fa-download me-1"></i>Export Data
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <!-- Quick Stats -->
        <div class="row mb-5">
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-number">{{ area_stats.total_population }}</div>
                    <p class="text-muted mb-0">Population</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-number">{{ area_stats.area_size }}</div>
                    <p class="text-muted mb-0">Area Size</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-number">{{ area_stats.green_cover }}</div>
                    <p class="text-muted mb-0">Green Cover</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-number">{{ area_stats.public_transport }}</div>
                    <p class="text-muted mb-0">Transport Coverage</p>
                </div>
            </div>
        </div>

        <!-- Performance Indicators -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h4 class="mb-0"><i class="fas fa-tachometer-alt me-2"></i>Performance Indicators</h4>
                    </div>
                    <div class="card-body">
                        {% if performance_indicators %}
                            {{ performance_indicators|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row 1 -->
        <div class="row">
            <div class="col-md-6">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h5 class="mb-0"><i class="fas fa-chart-pie me-2"></i>Sustainability Metrics</h5>
                    </div>
                    <div class="card-body">
                        {% if sustainability_chart %}
                            {{ sustainability_chart|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h5 class="mb-0"><i class="fas fa-radar me-2"></i>Comprehensive Analysis</h5>
                    </div>
                    <div class="card-body">
                        {% if radar_chart %}
                            {{ radar_chart|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row 2 -->
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h5 class="mb-0"><i class="fas fa-bolt me-2"></i>Energy Breakdown</h5>
                    </div>
                    <div class="card-body">
                        {% if energy_chart %}
                            {{ energy_chart|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h5 class="mb-0"><i class="fas fa-bus me-2"></i>Transportation Analysis</h5>
                    </div>
                    <div class="card-body">
                        {% if transport_chart %}
                            {{ transport_chart|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Satellite Data -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h4 class="mb-0"><i class="fas fa-satellite me-2"></i>Satellite Data Analysis</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                {% if satellite_analysis %}
                                    {{ satellite_analysis|safe }}
                                {% endif %}
                            </div>
                            <div class="col-md-4">
                                <h5>Satellite Metrics</h5>
                                <div class="metric-badge">
                                    <strong>NDVI:</strong> {{ "%.3f"|format(area_data.satellite_metrics.ndvi) }}
                                </div>
                                <div class="metric-badge">
                                    <strong>EVI:</strong> {{ "%.3f"|format(area_data.satellite_metrics.evi) }}
                                </div>
                                <div class="metric-badge">
                                    <strong>NDBI:</strong> {{ "%.3f"|format(area_data.satellite_metrics.ndbi) }}
                                </div>
                                <div class="metric-badge">
                                    <strong>LST:</strong> {{ "%.1f"|format(area_data.satellite_metrics.lst) }}°C
                                </div>
                                <div class="metric-badge">
                                    <strong>Urban Heat:</strong> +{{ "%.1f"|format(area_data.satellite_metrics.urban_heat_intensity) }}°C
                                </div>
                                
                                <h5 class="mt-4">Environmental Impact</h5>
                                <div class="metric-badge">
                                    <strong>Carbon Seq:</strong> {{ area_data.environmental_impact.carbon_sequestration }}
                                </div>
                                <div class="metric-badge">
                                    <strong>Air Quality:</strong> {{ area_data.environmental_impact.air_quality_index }}
                                </div>
                                <div class="metric-badge">
                                    <strong>Biodiversity:</strong> {{ area_data.environmental_impact.biodiversity_index }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Charts -->
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h5 class="mb-0"><i class="fas fa-balance-scale me-2"></i>Area Comparison</h5>
                    </div>
                    <div class="card-body">
                        {% if comparison_chart %}
                            {{ comparison_chart|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <div class="card-header card-header-custom">
                        <h5 class="mb-0"><i class="fas fa-trophy me-2"></i>Benchmark Analysis</h5>
                    </div>
                    <div class="card-body">
                        {% if benchmark_chart %}
                            {{ benchmark_chart|safe }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-city me-2"></i>Bhopal Urban Planning</h5>
                    <p>Detailed Area Analysis - {{ area_name }}</p>
                </div>
                <div class="col-md-6 text-end">
                    <p>&copy; 2025 NASA Space Apps Challenge</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>